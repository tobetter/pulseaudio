From 50b9a0cc8da84f848f0e9099c484edfdec2a92db Mon Sep 17 00:00:00 2001
From: Lennart Poettering <lennart@poettering.net>
Date: Thu, 22 Nov 2007 15:09:00 +0000
Subject: [PATCH] fix uploading of samples into PA. Problem discovered by Colin Guthrie

git-svn-id: svn://svn.0pointer.net/pulseaudio/trunk@2074 fefdeb5f-60dc-0310-8127-8f9354f1896f
---
 src/pulse/stream.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/pulse/stream.c b/src/pulse/stream.c
index 3e2d455..8ec348f 100644
--- a/src/pulse/stream.c
+++ b/src/pulse/stream.c
@@ -586,7 +586,7 @@ void pa_create_stream_callback(pa_pdispatch *pd, uint32_t command, PA_GCC_UNUSED
         }
     }
 
-    if (s->context->version >= 12) {
+    if (s->context->version >= 12 && s->direction != PA_STREAM_UPLOAD) {
         pa_sample_spec ss;
         pa_channel_map cm;
         const char *dn = NULL;
