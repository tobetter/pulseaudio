Index: pulseaudio-0.9.13/src/pulsecore/sink-input.c
===================================================================
--- pulseaudio-0.9.13.orig/src/pulsecore/sink-input.c	2008-12-28 23:33:28.000000000 -0500
+++ pulseaudio-0.9.13/src/pulsecore/sink-input.c	2008-12-28 23:35:20.000000000 -0500
@@ -292,8 +292,6 @@
         pa_assert_se(i->sink->n_corked -- >= 1);
     else if (i->state != PA_SINK_INPUT_CORKED && state == PA_SINK_INPUT_CORKED)
         i->sink->n_corked++;
-
-    pa_sink_update_status(i->sink);
 }
 
 /* Called from main context */
@@ -331,6 +329,8 @@
             pa_hook_fire(&i->sink->core->hooks[PA_CORE_HOOK_SINK_INPUT_STATE_CHANGED], ssync);
     }
 
+    pa_sink_update_status(i->sink);
+
     return 0;
 }
 
@@ -381,6 +381,8 @@
         pa_hook_fire(&i->sink->core->hooks[PA_CORE_HOOK_SINK_INPUT_UNLINK_POST], i);
     }
 
+    pa_sink_update_status(i->sink);
+
     i->sink = NULL;
     pa_sink_input_unref(i);
 }
@@ -442,6 +444,8 @@
 
     pa_subscription_post(i->sink->core, PA_SUBSCRIPTION_EVENT_SINK_INPUT|PA_SUBSCRIPTION_EVENT_NEW, i->index);
     pa_hook_fire(&i->sink->core->hooks[PA_CORE_HOOK_SINK_INPUT_PUT], i);
+
+    pa_sink_update_status(i->sink);
 }
 
 /* Called from main context */
Index: pulseaudio-0.9.13/src/pulsecore/sink.c
===================================================================
--- pulseaudio-0.9.13.orig/src/pulsecore/sink.c	2008-12-28 23:35:05.000000000 -0500
+++ pulseaudio-0.9.13/src/pulsecore/sink.c	2008-12-28 23:35:20.000000000 -0500
@@ -990,7 +990,9 @@
     unsigned ret;
 
     pa_sink_assert_ref(s);
-    pa_assert(PA_SINK_IS_LINKED(s->state));
+
+    if (!PA_SINK_IS_LINKED(s->state))
+        return 0;
 
     ret = pa_idxset_size(s->inputs);
     pa_assert(ret >= s->n_corked);
Index: pulseaudio-0.9.13/src/pulsecore/source-output.c
===================================================================
--- pulseaudio-0.9.13.orig/src/pulsecore/source-output.c	2008-12-28 23:35:05.000000000 -0500
+++ pulseaudio-0.9.13/src/pulsecore/source-output.c	2008-12-28 23:35:20.000000000 -0500
@@ -246,7 +246,6 @@
     else if (o->state != PA_SOURCE_OUTPUT_CORKED && state == PA_SOURCE_OUTPUT_CORKED)
         o->source->n_corked++;
 
-    pa_source_update_status(o->source);
 }
 
 /* Called from main context */
@@ -264,6 +263,8 @@
     if (state != PA_SOURCE_OUTPUT_UNLINKED)
         pa_hook_fire(&o->source->core->hooks[PA_CORE_HOOK_SOURCE_OUTPUT_STATE_CHANGED], o);
 
+    pa_source_update_status(o->source);
+
     return 0;
 }
 
@@ -302,6 +303,8 @@
         pa_hook_fire(&o->source->core->hooks[PA_CORE_HOOK_SOURCE_OUTPUT_UNLINK_POST], o);
     }
 
+    pa_source_update_status(o->source);
+
     o->source = NULL;
     pa_source_output_unref(o);
 }
@@ -353,6 +356,8 @@
 
     pa_subscription_post(o->source->core, PA_SUBSCRIPTION_EVENT_SOURCE_OUTPUT|PA_SUBSCRIPTION_EVENT_NEW, o->index);
     pa_hook_fire(&o->source->core->hooks[PA_CORE_HOOK_SOURCE_OUTPUT_PUT], o);
+
+    pa_source_update_status(o->source);
 }
 
 /* Called from main context */
Index: pulseaudio-0.9.13/src/pulsecore/source.c
===================================================================
--- pulseaudio-0.9.13.orig/src/pulsecore/source.c	2008-12-28 23:35:05.000000000 -0500
+++ pulseaudio-0.9.13/src/pulsecore/source.c	2008-12-28 23:35:20.000000000 -0500
@@ -637,7 +637,9 @@
     unsigned ret;
 
     pa_source_assert_ref(s);
-    pa_assert(PA_SOURCE_IS_LINKED(s->state));
+
+    if (!PA_SOURCE_IS_LINKED(s->state))
+        return 0;
 
     ret = pa_idxset_size(s->outputs);
     pa_assert(ret >= s->n_corked);
