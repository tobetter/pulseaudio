From dfd706da71322c03a958cb5994bdb72953eaffa3 Mon Sep 17 00:00:00 2001
From: Maarten Bosmans <mkbosmans@gmail.com>
Date: Fri, 2 Sep 2011 14:11:51 +0200
Subject: [PATCH 107/111] Squash the last gcc warnings

---
 src/pulse/ext-device-restore.c |    2 +-
 src/pulsecore/memtrap.c        |    3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/pulse/ext-device-restore.c b/src/pulse/ext-device-restore.c
index 7d7b24f..25d33d1 100644
--- a/src/pulse/ext-device-restore.c
+++ b/src/pulse/ext-device-restore.c
@@ -203,7 +203,7 @@ static void ext_device_restore_read_device_formats_cb(pa_pdispatch *pd, uint32_t
                         uint8_t k;
 
                         pa_context_fail(o->context, PA_ERR_PROTOCOL);
-                        for (k = 0; k <= j; k++)
+                        for (k = 0; k < j+1; k++)
                             pa_format_info_free(i.formats[k]);
                         pa_xfree(i.formats);
                         goto finish;
diff --git a/src/pulsecore/memtrap.c b/src/pulsecore/memtrap.c
index 4df1fb7..4236934 100644
--- a/src/pulsecore/memtrap.c
+++ b/src/pulsecore/memtrap.c
@@ -69,7 +69,8 @@ pa_bool_t pa_memtrap_is_good(pa_memtrap *m) {
 
 #ifdef HAVE_SIGACTION
 static void sigsafe_error(const char *s) {
-    (void) write(STDERR_FILENO, s, strlen(s));
+    size_t ret PA_GCC_UNUSED;
+    ret = write(STDERR_FILENO, s, strlen(s));
 }
 
 static void signal_handler(int sig, siginfo_t* si, void *data) {
-- 
1.7.5.4

